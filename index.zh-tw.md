---  
title: Windows配置免密登錄在Ubuntu不生效的問題  
date: 2023-04-15T00:05:26+08:00  
description:  
toc: true  
categories: ["技術"]  
image: cover.jpg  
tags: ["運維","SSH","Ubuntu"]  
keywords: ["運維","SSH","Ubuntu"]  
---  
> Warning: This page was generated by machine translation, please pay attention to the accuracy of the identification information!  
  
# Windows配置免密登錄Ubuntu不生效的問題  
  
## 起因  
  
在配置我的個人博客期間，打算使用Github Action進行自動部署，其中需要使用SSH密鑰的方式來進行免密登錄。  
  
## 參考鏈接  
  
1. [如何在Ubuntu 20.04配置SSH密鑰免密碼登錄](https://www.myfreax.com/how-to-set-up-ssh-keys-on-ubuntu-20-04/)  
  
2. [解決SSH免密登錄配置成功後不生效問題](https://blog.csdn.net/lisongjia123/article/details/78513244)  
  
## 配置  
  
博主使用的是win10，Ubuntu20.04；  
  
配置密鑰的流程很簡單，首先使用生成密鑰對  
  
```shell  
ssh-keygen -t rsa -q -C "For SSH" -f rsa_id  
```  
  
然後使用`ssh-copy-id remote_username@server_ip_address` 將公鑰部署到遠程服務器上，但是Windows一般沒有`ssh-copy-id`命令，所以可以使用下面命令替代。  
  
```shell  
cat ~/.ssh/id_rsa.pub | ssh remote_username@server_ip_address "mkdir -p ~/.ssh && chmod 700 ~/.ssh && cat >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys"  
```  
  
之後，重啟ssh服務，使用`ssh remote_username@server_ip_address` 連接發現仍然需要密碼，查閱資料過後，鏈接2是在Linux平台上的，不適用Windows。百思不得其解。  
  
##  
  
  
  
<img src="image-20230413143814145.png" alt="image-20230413152155447" style="zoom:50%;" />  
  
  
  
```yaml  
Host yourhost  
Hostname yourhost  
Port 22  
User youruser  
IdentityFile ~/.ssh/your_key  
```  
  
  
<img src="image-20230413144414536.png" alt="image-20230413152155447" style="zoom:80%;" />  
  
